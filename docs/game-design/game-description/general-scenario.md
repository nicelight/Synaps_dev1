# Игра Synaps. Game design.
*Игра будет работать как Telegram Mini App. Аккаунт игрока в телеграм = аккаунту игрока в игре. Кроме того существует возможность входа в игру без телеграм аккаунта -  через страницу входа, по одному из заранее предустановленных в системе аккаунтов от имени семьи "государство".*

## Общее описание игры
Геймплей привязан к настоящей карте, положение игроков определяется по GPS координатам мобильного телефона каждого игрока и отслеживается на сервере каждых 15 секунд. Игра представляет из себя приближенный к реальному симулятор жизни в городах, в которых есть корпорации, создающие свои AGI с помощью чипов NPU и конкурирующие друг с другом за владение территориями и установление своей политики на территориях. 

## Термины и определения
2. Крафт - слово, обозначающее "создать".
4. Скрафтить - слово, обозначающее "создать".
6. Лут - слово, обозначающее "добытая вещь".
8. Налутать - слово, обозначающее "добыть вещь".
10. Тул - слово, обозначающее "инструмент".

12. Игрок - реальный человек.
13. Персонаж - игровой персонаж игрока, у которого есть свои характеристики. От имени персонажа каждый игрок играет в игре.
14. username персонажа - поле `string:` в характеристиках персонажа, которое в точности соответствует `@username` телергам аккаунта игрока, полученное через API телеграмм.  
15. Имя персонажа - поле `string:` в характеристиках персонажа, имеет значение `first_name` телеграм аккаунта игрока, полученное через API телеграмм.  
16. Карта игры -  основной интерфейс игры, представляющий из себя настоящую карту, соответствующую действительности с отображением игроков и спотов на карте.
17. Спот - Определенная область на карте игры, обычно круглая. Спот имеет центр спота и его радиус в метрах. Спот имеет особое предназначение в игре. В пределах спота на игроков могут дейстовать особые правила игры. Чтобы попасть в спот, мобильный телефон игрока должен физически находиться в зоне спота по координатам GPS.
19. Дистанция - расстояние или размер на карте, это либо расстояние между игроками либо между игроком и спотом. 
20. Инвентарь - хранилише персонажа, спота или тула. Инвентарь состоит из слотов.
22. Слот - ячейка в инвентаре, в которой можно расположить любую вещь.
24. **Вещь** - сущность в игре, которая имеет свои характеристики и может храниться, передаваться или использоваться. Вещь находится или в слоте или по каким то координатам. Бывают такие вещи как: рессурсы, материалы, компоненты и инструменты. 
25. Рессурс - сущность, которую можно налутать и поместить в свой инвентарь. Имеет обязательный атрибут - "количество".
26. Материал - сущность, которую можно скрафтить из рессурсов и других материалов. Имеет обязательный атрибут - "количество".
27. Компонент - сущность, которую можно скрафтить из рессурсов, материалов и других компонентов. Имеет обязательный атрибут - "количество".
28. Тул - сущность, которую можно скрафтить из рессурсов, материалов, компонентов и других тулов. Не имеет атрибут - "количество". В одном слоте всегдаможет лежать только 1 тул. 
29. Стак - Какая либо вещь в игре, имеющая атрибут "количество" с максимальным для атрибута данной вещи значением. Т.е. это как бы максимальное количество вещей в слоте. Для сервера по факту это просто одна вещь, одна сущность.
 
 41. Сет - одно из трех направлений подмножества профессий в игре. В игре есть 3 сета.
 42. ОСНОВНОЙ СЕТ - один из трех сетов, который игрок выбирает для своего персонажа в начале игры, как основной.
 43. Текущий сет - тот сет, который сейчас применен к персонажу. Каждый персонаж может нахоидться в состоянии одного из трех сетов. В начале игры персонаж находится в состоянии ОСНОВНОГО СЕТА. Игрок может переключать текущий сет персонажа, но не чаще 1 раза в сутки.
46. Скилл - один из вариантов профессии из подмножества профессий того или иного сета. Т.е. в каждом сете есть свой набор скиллов.

61. Чип - вещь, созданная в игре, имеющий особое значение для игроков.
 63. "Датасет" - вещь(сущность), которую можно получить за выполнение определенных заданий, в том числе за то что персонаж играет в миниигру.

 81. государственные объекты, далее сокращенно "гос. объект" - споты, принадлежащие семье по имени "государство". Такие споты имеют механику работы, несколько отличающуюся от частных или семейных спотов. 




201. Личный интерфес - веб страничка на которой игрок видит своего персонажа, его характеристики, инвентарь, статы, текущий сет. 
203. Публичный интерфейс - веб страничка на которой любой игрок может посмотреть характеристики персонажа находящегося в пределах поляны. Эта веб страничка анаогична страничке Личного интерфейса, но некоторые данные не будут отображаться. 



## Начальные параметры старта игры
Инвентарь игрока состоит из 10 слотов и может содержать вещи, такие как: ресурсы (добываются через майнинг, лут, воровство) и артефакты (материал, компонент, изделие добываются через крафт игроком). В каждой ячейке может лежать 1 вещь.
Кроме того у игрока есть один слот для вещи в руках . У каждой вещи в руках есть от 0 до 6 мини-слотов, в них могут находиться вещи, относящиеся к работе этим инструментом. У каждого игрока в начале игры должна быть выбран ОСНОВНОЙ СЕТ професий. ОСНОВНОЙ СЕТ можно изменить не чаще одного раза в день.

## Социальная составляющая игры
В игре должна быть активно развита социальная составляющая.
Игрок считается валидным если он был онлайн хотя бы 1 раз за последних  дня. Если не был онлайн за последних три дня - игрок не валидный, он не принимает участия в игровых социальных механиках. Если игрок не был онлайн 2 месяца, он считается умершим. 

### Сближение отношений между игроками
#### Дружба 
Стать другом можно только если ты имеешь более 12 передач вещей с одним и тем же игроком, минимум 7 передач должно быть на расстоянии поляны.
#### Семья
Семью могут образовать не менее 3 друзей. Они должны встретиться на одной поляне одновременно. Каждый желающий создать семью будет называться кандидатом. Каждый кандидат на создателя семьи должен держать в руке заряженный NPU чип и иметь минимум 100 передач вещей любому из находящихся на поляне кандидатов.  Если каждый кандидат на поляне нажимает кнопку "стать семьей", все из них запускают процесс создания семьи, экран телефона начинает мигать белым с текстом - "INIT..", происходит запуск инициализации семьи, отображается обратный отсчет 10 секунд. После каждый кандидат видит экран с текстом: "Вы хотите создать семью с друзьями: `name1`, `name2`, `name3`? Семья это всерьез и на долго. Вы не сможете просто так покинуть семью или разрушить ее. Главой семьи сейчас назначается `name1`(тот из кандидатов, у кого больше всего игрового опыта). Хорошо подумайте, вы согласны стать частью семьи `Name1`?" Если каждый участник отвечает - "Да! Я серьезен, как никогда.",- то считаем что семья создана. Если кто либо из кандидатов нажимает "не в этот раз", процесс создания семьи анулируется. Кнопка создания семьи у каждого из кандидатов станет снова активна только через 24 часа. Каждый из игроков, принимавших участие в создании семьи считаются ее основателями. Ни один игрок по своей воле не может покинуть семью в течении первого месяца после вступления. Вчтобы пригласить игрока в семью, он должен иметьхотя бы 2 передачи вещей с каждым валидным игроком из этой семьи. Чтобы выгнать игрока из семьи, все участники семьи должны проголосовать единогласно за изгнание участника из семьи. Выгнать из семьи основателей может только глава семьи. Если в семье остается один человек, семья распадается. Если в семье появляется умерший человек, он автоматически исключается из семьи.
##### Государство
В игре будет заранее создана семья по имени "государство". Для нее будут зарегитсрированы аккаунты, через которые в игру можно зайти без регистрации через телеграмм месенджер. Эти аккаунты предназначены для администраторов, модераторов и тестировщиков игры.

### Помощь
#### Передача вещей 
Процесс передачи  передачи вещи другому игроку это один из видов помощи.
Сценарий передачи вещей любому не дружественному/не дружественному игроку:
 - на расстоянии поляны в течении 30 секунд/10 секунд
 - на расстоянии района в течении 30 минут/1 минута
 - на расстоянии города в течении 3 часа/10 минут

### Бизнес
каждая семья может создать до трёх бизнесов. 
В Бизнес можно нанимать работников не из семьи.  *TODO подумать над механикой бизнеса*
Один из видов бизнеса: AI корпорация, которая разрабатывает NPU. на сервере можно продавать NPU чипы за реальные деньги или использовать для увеличения влияния на город. 

### Репутация
Если игрок помог другому игроку, то другой игрок может поставить палец вверх и поднять репутацию помогшему ему игроку. Механика такая, что по окончанию процесса передачи вещи, появляется окно с четырьмя вариантами: "Отказаться, палец вниз", "Отказаться", "Забрать палец вверх", "Забрать". Если игрок отказывается, появляется еще одно уточняющее окно: "точно отказаться"?


## Карта
### Дистанции на карте 
есть 4 типа дистанций: 
 - страна (300км)
 - город (20км)
 - район (500 метров)
 - поляна (15 метров). 

### Видимость друг друга
Все игроки могут видеть друг друга на карте в пределах города только серыми точками без ника. темно серый - игрок онлайн, светло серый - оффлайн. при наведении можно узнать сферу деятельности игрока.
Все игроки могут видеть друг друга на карте в пределах поляны Статусными Бимами.  Статусный Бим выглядит, как двухцветное круглое пятно: внутренний маленький кружочек цветом типа деятельности, внешний большой круг аура цветом репутации.   Друзья могут видеть друг друга на карте цветной точкой(цвет репутации) и с подписью ником, в пределах города. Родственники могут видеть друг друга цветной точкой в пределах страны.

### Отображение спотов на карте
Добывающие споты выделены полупрозрачным треугольниом на карте. Производственные выделены полупрозрачным  квадратом. Умершие производственные выделены перевернутым треугольником ( основание равнобедренного треугольника вверху). Социальные споты отображены кружочками.Социальные споты видят только игроки, состоящие в семье. 



## Споты 
Спот это любое место на карте размером с поляну, с особенными параметрами. Обычно на спотах есть или разведанные рессурсы, или построено строение, или собраны люди для действий.
**На карте есть 4 вида спотов: добывающие, производственные, умершие и социальные**
### Добывающий спот 
Это Спот, на котором  разведаны рессурсы для добычи.  На одном добывающем споте есть определенное количество одного рессурса. Если добывающий спот полностью истощен, спот получает пометку "истощенный" и на его месте можно построить производственный спот.   
### Спот Мусорник
Особый вид добывающего спота. Имеет 10 слотов. Если есть пустые слоты, то  каждый час спавнится небольшое количество ресурсов или материалов. 1 раз в день в случайное время спавнится простая деталь. Деталь спавнится даже если нет свободных слотов, происходит процесс поиска слота с рессурсом и на его место помещается деталь, а рессурс исчезает. 1 раз в неделю спавнится сложная деталь, она занимает слот первого попавшегося рессурса или простой детали. 1 раз в месяц спавнится NPU и занимает слот сложной\простой детали. Если человек подбирает с мусорника чаще, чем 1 раз в 3 дня, его репутация понижается. На экране с мусорником виден таймер, сколько осталось времени до возможности подобрать что либо из мусорника без понижения репутации.
### Производственный спот
Спот, на котором размещено государственное или частное производство ( фабрика) или лаборатория. Производственный спот имеет свой срок эксплуатации, после чего он ломается, сломанный спот нужно ремонтировать. Если производственный спот в течении недели не был отремонтирован, он разрушается и превращается в Умерший производственный спот. 
#### Типы производственных спотов:
 - фабрика по производству материалов из ресурсов
 - фабрика по производству деталей из материалов
 - фабрика по разложению деталей на материалы, а материалов на ресурсы
 - завод по производству сложных деталей из простых деталей
 - научный центр по обучению NPU. 
### Умерший производственный спот
Спот содержит 62% вещей, затраченных на создание производства, которое тут умерло.  Эти вещи лежат посредине спота. Любой Персонаж, находящийся в пределах спота может лутать эти вещи без просадки кармы. Как только все вещи будут залутаны, спот удаляется.
 *Продумать механику подбирания вещей, как считать таймеры подбора(1 р. в час?)*
 *Продумать механику разрущения инструментов и компонентов*

### Социальный спот
#### типы социальных спотов:
 - парк для встреч игроков, на котором мини-игры приносят в 5 раз больше "датасетов", чем  обычно.
 - мини парк, то же самое что парк, но  мини-игры приносят в 3 раза больше "датасетов", чем обычно.
 *TODO доработать другие типы социальных спотов и механику их работы*


## Професии
В начале игры каждый игрок начинает играть бродягой.  Каждый вид професии игрок может прокачивать по мере игры. Периодически игрок может переключать вид профессии.
У каждого вида профессии есть свое дерево развития. По мере роста уровня персонажа, игрок может выбирать какую ветку развития професии прокачивать.
**Виды профессий:**
 - трудяга
 - интеллектуал
 - бродяга
Трудяга - вид профессии дающий преимущества лута рессурсов и крафта. 
Интеллектуал - вид профессии дающий преимущества в обучении чипов и развитии характеристик спотов.
Бродяга особый вид профессии, сосредоточенный на искусстве воровства, лутания Мусорников без штрафов и разведки.

## Механика процесса труда в игре
### Разведка рессурсов
  Игрок получает 1 раз в 48 часов  способность создать производственный спот. Игрок получает 1 раз в 164 часа способность разведать Добывающий Спот . игрок выбирает кнопку разведка - тип рессурса - разведать. Если попытка разведки была успешной(вероятность 21%), то спот, на котором стоит игрок, автоматически превраращается в Добывающий Спот с данным рессурсом, а на кнопке разведки появляется обратный таймер на 1 неделю. Если попытка разведки закончилась провалом, на кнопке разведки появляется обратный таймер на 6 часов. По истечении таймера кнопка снова доступна.  Если Деятельность игрока - археолог, его таймеры разведки сокращены в 7 раз.
#### Ресурсы, доступные для разведки любому игроку:
 - металл
 - медь
 - кремний
 - уголь
#### Ресурсы, доступные для разведки игроку, состоящему в семье:
 - золото
 - литий
 - уран
 - нефть
> *Какие ещё могут быть ресурсы и для чего?*

### Майнинг 
Каждый Добывающий спот содержит определенное количество рессурсов. До тех пор, пока на Добывающем споте остались рессурсы, любой игрок или оборудование может производить майнинг рессурсов.
Если игрок физически находится на Добывающем споте, у него появляется возможность играть в Миниигру. 
### Крафт
 
#### Генеральный процесс крафта чипов. 
Чипы создаются на фабриках. 
Чипы будут трех видов: PU, TPU, NPU. Смотри описание чипов тут https://habr.com/ru/companies/fplus_tech/articles/885690/
 PU - Обычные чипы, создаются на фабриках из ресурсов. PU двух типов: процессор (Зеленые микросхемы) и Flash память(Синие микросхемы). 
TPU - это AI чипы. TPU создаются на специальной фабрике из PU чипов (Красные микросхемы).
NPU - это AI чипы которые создаются в IT лабораториях из TPU чипов и Flash памяти ( Фиолеттовые микросхемы)
 NPU чипы по умолчанию не заряженные и представляют мало ценности. Однако если провести NPU через процесс обучения, он становится заряженным. 


### Обучение чипов 
Обучение NPU чипов может производить квалифицированный IT-шник
Обучение проводится в лаборатории. Лаборатория это особый вид фабрики. Есть государственная лаборатория и частная, построенная семьей. В гос. лабораторию можно прийти со своими "датасетами" на Flash памяти ( на флешке) и TPU чипом, для обучения его и превращения в NPU. Во время подачи игроком запроса на обучение NPU в гос. лаборатории происходит проверка игрока на количество опыта в игре. если сумарно его меньше 33 часов, игрок считается читером с вероятностью 50%, данные об этом заносятся в базу данных игрока. Игрок получает в процессе создания НЕ заряженный NPU. Если игрок во время подачи TPU на обучение имеет 33 часа опыта, то в конце он получает заряженный NPU. Подачу на обучение TPU в гос. лаборатории можно сделать бесплатно только 1 раз за игру, об этом важно сказать. Будучи в семье, можно построить свою IT лабораторию и там обучать свои TPU бесплатно в неограниченном количестве, превращая их с помощью Обучения на "датасетах" в NPU. Такие NPU не заряжены. Для их зарядки необходимо провести процесс файн тюнинга. Для файн тюнинга нужна особенная лаборатория, которую может произвести только семья. Гос. лаборатория выдает заряженный NPU единожды в игре для возможности создать свою семью.

## Механика инвентаря в игре
Инвентарь это абстрактное понятие,относящееся к слотам персонажа, спота или тула. Говоря об инвентаре, мы говорим о том или ином слоте персонажа или спота, или тула. Каждый слот может хранить в себе одну вещь.
**Механизм количества вещей в игре сделан таким образом, что каждая отдельная вещь типа рессурс\материал\компонент имеет персонального индекса, за исключением атрибута "Id"**


## Механика вещей в игре
Все вещи в игре должны иметь атрибуты:
 - "id"
 - "количество"
 - "принадлежность"
 - "исходнаяПринадлежность"
 - "обитание"
 - "местоположение"
 "Id" - порядковый номер вещи в игре.
 "Количество" - это поле указывает на то, сколько вещей имеет игрок в одном слоте, хотя по факту с точки зрения кода и базы данных персонаж имеет просто 1 вещь ( одну сущность) с атрибутом "количество"
"Принадлежность" - `string:` имя персонажа или семьи, кому принадлежит вещь. 
"исходнаяПринадлежность" - id персонажа или семьи, кто создал вещь
"Обитание" - айди номера ячейки, в которой вещь находится.
"Местоположение" - координаты геопозиции, если необходимо.
 Если вещь не находится ни в какой ячейке, то значение атрибута "обитание" = -1, а ее атрибут "местоположение" = геопозиции , которая будет назначена во время того, как вещь утрачивает обитание("обитание" = -1).
У каждой 
### Перемещение вещей 
Персонаж не может самостоятельно разделять вещи на несколько, он может только объединять их воедино. Процесс объединения вещей седующий. Если происходит попытка переложить вещь определенного "id"  из одного слота в другой, в котором уже присутствует такая же вещь (с тем же "id"), то происходит пересчет атрибутов первой и второй вещи, так чтобы у первой вещи атрибут "количество" стал равен сумме атрибутов "количество" первой и второй вещи. Если сумма не больше максимально допустимого числа для атрибута данной вещи то первая вещь удаляется, освобождая слот. Если атрибут "количетсво" второй вещи стал больше максимально допустимого, то происходит рассчет на какое число "количество" второй вещи стало больше, и присваиваем атрибуту "количество" первой вещи это число, а атрибут "количество" второй вещи делаем максимальным. То есть объединение  двух вещей с одинаковым "id" в одном слоте влечет за собой пересчет атрибутов "количество" этих вещей. 
Процесс разделения вещей происходит тоже через пересчет "количество" и этот процесс доступен только в том случае, если происходит попытка переложить вещь из одного слота, в другой специальный слот. Таким специальным слотом может являться или слот руки 

## Миниигры
Миниигра это игра внутри игры Synaps. В миниигру могут играть персонажи, если они находятся физически в рамках одного спота. 
Есть следующие миниигры:
 - BatleLasers
 - BatleShips
 - BatleArkanoid
 - QuestLabirint
 - QuestMiner
 - LogicMath
 - LogicGeo
Если игрок, находясь на поляне нажимает играть, он попадает в комнату игры, а цвет его Статусного Бима становится мигающим на карте игры. Другие игроки на данном споте тоже могут попасть в комнату игры данного спота. В интерфейсе комнаты игры есть кнопка "Старт". Кто угодно из игроков в комнате способен нажать эту кнопку и игра начнется. 
### Миниигра BatleLasers
В комнате BatleLasers может находиться не более 2 игроков. При нажатии на "старт" эти игроки попадают в интерфейс миниигры BatleLasers. Первый, зашедший в комнату игрок становится вверх на экране, исполняя роль защитника, он будет управлять лазерами. Второй игрок становится вниз экрана, на роль нападающего, он должен пройти вверх к защитнику. По периметру комнаты расположены лазеры. Защитник видит в каком направлении лазеры будут стрелять. Нападающий видит только где лазеры расположены но не видит в какое именно направление они сейчас нацелены. Коротким нажатием на лазер защитник активирует его выстрел, происходит анимация лазера и через 1 секунду лазер запускается, отрисовывая луч через весь экран. Если нападающий коснется луча, он проиграл. Долгим нажатием на лазер защищающийся меняет его направление. У каждого лазера есть 3 фиксированных направления. Лазер меняет свое направление последовательно 1-2-3-1 при долгом удержании лазера защищающимся. Если нападающий дойдет и дотронется до защищающегося, он победил. Если время раунда пройдет, защищающийся победил. Если нападающий попал на лазер, защищающийся победил.


## Особенности персонажей
 Когда у игрока есть в инвентаре NPU, цвет Бима его ауры становится белым и радиус Бима на карте увеличивается.



## Параметры персонажа
--
На бэкенде есть столбец в котором указывается в процентах вероятность того что игрок читер или не честно играющий. Все что выше 50% это читер. Все что ниже, это не честный.



## Игровой опыт 
Есть разные типы опыта, в каждой Деятельности персонажа свой счетчик опыта и свои уровни.



## Виды Деятельности игрока
Игрок может сменить свой вид деятельности не чаще 1 раза в 24 часа.
Археолог - производит ускоренную разведку рессурсов на карте.
Трудяга - добывает ресурсы и производит простые материалы.
Мастер - производит детали и сложные детали из материалов. 
ITшник - обучает NPU.
(Предусмотреть механизм цен для обмена )

---


**задание**
Наша цель - мотивировать людей общаться друг с другом а так же узнавать через игру как устроен реальный мир, как протекают взаимоотношения между людми, как происходит конкуренция на уровне корпораций.
Давай будем углубляться в размышления над сценарием и гейм-флоу игры. Предлагай варианты механик игры, виды деятельности игроков, механику их дательности, а так же ключевые цели ради которых у игроков будет стимул играть? 
 

 Рессурсы: кремний. Его потом нужно очистить и превратить в пластину. 
Фабрика - аккумуляторы.
На полянах можно вместе играть в мини игры. Каждая мини-игра, которая отыгралась хотя бы минуту, дает "датасет", который  можно сохранять на флешку. Каждая игра дает "датасет" своего типа с параметрами. Количество сыгранных в раунде минут, дает количество "датасетов".

*TODO Какие еще могут быть виды деятельности персонажа?*
*TODO Какие еще могут быть виды репутации игрока?*
*TODO Как можно мотивировать людей перемещаться по карте с целью ускорения Крафта вещей?*
